<!DOCTYPE html>
<html>

<head>
  <title>GGL</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <link rel="stylesheet" href="/src/client/index2.css">
  <link rel="icon" href="/static/glider.png">
  <style>
    .row>div {
      padding: 20px;
      background-color: none;
      border: none;
    }

    .container-fluid {
      min-height: 100% !important;
      padding: 20px 20px 20px 30px;
    }

    html,
    body {
      height: 100%;
      overflow: hidden;
    }

    ::-webkit-scrollbar {
      width: 0;
      /* Remove scrollbar space */
      background: transparent;
      /* Optional: just make scrollbar invisible */
    }

    .center {
      text-align: center;
      margin: auto;
    }

    .alert {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      margin: 0;
      /* background-color: rgba(0, 0, 0, 1.0); */
      border: none;
    }
  </style>
</head>

<body>

  <canvas id="myCanvas" style="border:0px solid lightgrey;z-index:-1;">
    Your browser does not support the HTML5 canvas tag.
  </canvas>

  
  <div style="
    position:absolute;
    top: 30px;
    left: max(80px , calc(50vw - 350px));
    height:710px;
    /*height: calc( 100vh - 60px );*/
    width: calc( 100vw - 160px );
    /*min-height: 700px;*/
    max-width: 700px;
    /*background-color: rgb(44 82 79 / 26%);*/
    background-color: rgb(0 18 32 / 19%);
    border-radius: 10px;
    z-index:-1;
  "></div>


  <ul id="messages"></ul>
  <div class="container-fluid">
    <div class="row">
      <div class="col">
        <div class="center">
          <img src="/static/ggl_logo_transparent_bg.png" class="img-fluid" style="max-width: 70%; height: auto; margin-bottom: 10px;" alt="ggl_logo">
          <h1>
            The Game of Game of Life
          </h1>
          <h5>
            Based on <em>Conway's Game of Life</em>
          </h5>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col">
        <div class="center">
          Game mode<br>
          <div class="btn-group" role="group" aria-label="Basic example">
            <button type="button" class="btn btn-dark" id="FFA"
              onclick="setGameMode(this.id)">&nbsp;&nbsp;&nbsp;FFA&nbsp;&nbsp;&nbsp;</button>
            <button type="button" class="btn btn-dark" id="SINGLE" onclick="setGameMode(this.id,true)">SINGLE</button>
          </div>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col">
        <div class="center">
          This is the tale of...<br>
          <input type="text" class="form-text-lg" id="usernameInput" name="username" placeholder="ENTER USERNAME"
            style="text-align:center">
          <br>
          (press enter to spawn)<br>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col">
        <div class="center">
          <button type="button" class="btn btn-info btn-sm" id="howto" onclick="howto()">How to play</button>
          <!-- <div id="HowToPlay" style="display: none;">
            <p>
            <h6>Basic movements</h6>
            Move with <kbd>W</kbd>,<kbd>A</kbd>,<kbd>S</kbd>,<kbd>D</kbd><br>
            Shoot gliders with <kbd>Y</kbd>,<kbd>I</kbd>,<kbd>H</kbd>,<kbd>K</kbd><br>
            <br>
            <h6>FFA (free-for-all) mode</h6>
            You die if you step on a black cell. <br>
            Stay alive as long as possible<br>
            while attacking others with gliders!<br>
            <br>
            <h6>SINGLE (single-player) mode</h6>
            Bordered squares are called <em>cracks</em>. <br>
            The goal is to remove all the cracks!<br>
            </p>
          </div> -->
        </div>
      </div>
    </div>
    <div class="alert alert-warning" id="warning" style="display: none; z-index: 100;">
      <div class="center">
        <b>WARNING:</b> The single mode is still under construction.
        There are two levels for now,<br><b>level 0: practice</b> and <b>level 1: time record,</b><br>and we are working on making ~30 stages with various missions which will be added in the future.<br> 
        <button type="button" class="btn btn-info btn-sm" onclick="singleLevels(0)" >level 0</button>
        <button type="button" class="btn btn-info btn-sm" onclick="singleLevels(1)">level 1</button>
        <button type="button" class="btn btn-info btn-sm" onclick="singleLevels('Back')">Back</button>
      </div>
    </div>
    <div class="row">
      <div class="col">
        <div class="center">
          <br>
          <hr style="width:40%;max-width:500px; margin: auto;">
          <br>
          Developed by <a href="https://www.its.caltech.edu/~spark3/">SH Park</a> and HG Suh
        </div>
      </div>
    </div>
  </div>
  </div>

  <div class="alert alert-info" id="HowToPlay" style="display: none;">
    <div class="center">
      <p>
      <h3>Basic movements</h3>
      <img src="/static/ggl_howtoplay.png" class="img-fluid" style="max-width: 80%; height: auto;" alt="keyboard controls">
      <br><br>
      Move with
      <table style="display: inline-table;">
        <tr>
          <th></th>
          <th><kbd>W</kbd></th>
          <th></th>
        </tr>
        <tr>
          <th><kbd>A</kbd></th>
          <th><kbd>S</kbd></th>
          <th><kbd>D</kbd></th>
        </tr>
      </table>,&nbsp;&nbsp;&nbsp;&nbsp;
      shoot gliders with 
      <table style="display:inline-table">
        <tr>
          <th><kbd>Y</kbd></th>
          <th>&nbsp;&nbsp;</th>
          <th><kbd>I</kbd></th>
        </tr>
        <tr>
          <th><kbd>H</kbd></th>
          <th>&nbsp;&nbsp;</th>
          <th><kbd>K</kbd></th>
        </tr>
      </table><br><br><br>
      <h3>Basic rules</h3>
      The black and white cells in the background evolve according to <a href = "https://en.wikipedia.org/wiki/Conway%27s_Game_of_Life">Conway's game of life</a>. <br>
      You die if you step on a black cell. <br>
      Stay alive as long as possible while attacking others with gliders!<br>
      <!-- <h6>FFA (free-for-all) mode</h6>
      You die if you step on a black cell. <br>
      Stay alive as long as possible<br>
      while attacking others with gliders!<br>
      <br>
      <h6>SINGLE (single-player) mode</h6>
      Bordered squares are called <em>cracks</em>. <br>
      The goal is to remove all the cracks!<br> -->
      </p>
      <button type="button" class="btn btn-light btn-sm" id="CloseHowToPlay" onclick="closehowto()">Close</button>
    </div>
  </div>


  <script src="/socket.io/socket.io.js"></script>
  <script src="/src/client/download.js"></script>
  <script src="/src/client/state.js"></script>
  <script src="/src/client/gui.js"></script>
  <script src="/src/client/socket.js"></script>


  <script>
    //setGame("FFA");
    // document.body.scrollTop = 0;
    // document.body.style.overflow = 'hidden';

    // Get the input field

    document.body.addEventListener("keyup", function (event) {
      if (event.key === "Enter") {
        event.preventDefault();
        gameEnter();
      }
    });

    if (window.ggluser.name) {
      document.getElementById("usernameInput").value = window.ggluser.name;
    }

    setGameMode(window.ggluser.gameMode);

    function howto() {
      let x = document.getElementById("HowToPlay");
      x.style.display = "block";
    }
    function closehowto() {
      let x = document.getElementById("HowToPlay");
      x.style.display = "none";
    }

    function setGameMode(tag,showwarning) {
      window.ggluser.gameMode = tag;
      if (window.ggluser.gameMode == "FFA") {
        document.getElementById("FFA").style.backgroundColor = `hsl(166,100%,40%)`;
        document.getElementById("SINGLE").style.backgroundColor = "#333";
        document.getElementById("warning").style.display = "none";
      } else if (window.ggluser.gameMode == "SINGLE") {
        document.getElementById("FFA").style.backgroundColor = "#333";
        document.getElementById("SINGLE").style.backgroundColor = `hsl(195,100%,40%)`;
        if(showwarning){document.getElementById("warning").style.display = "block";}
      } 
    }

    function singleLevels(tag){
      if(tag=="Back"){
        document.getElementById("warning").style.display = "none";
        return;
      };
      window.ggluser.singlelevel=parseInt(tag);
      gameEnter();
    }
    listenBG();
  </script>
</body>

</html>